/*! karma-e2e-dsl - v0.3.0 - 2015-01-30 */!function(a,b,c,d){"use strict";function e(a){return function(){var c=b.Deferred();return a&&a.apply(this,[c].concat([].slice.call(arguments))),c.promise()}}function f(a,c){var d=b.Deferred(),e=c||0,g=a[e],h=[].slice.call(arguments,2);return g?g.apply(g,h).then(function(){var b=[].slice.call(arguments);f.apply(this,[a,++e].concat(b))}):d.resolve(),d.promise()}function g(a){var b=a.split("/");return b[b.length-1]}function h(a){var b=g(a);return a.substring(0,a.length-b.length)}function i(){for(var a="",b=!1,c=arguments.length-1;c>=-1&&!b;c--){var d=c>=0?arguments[c]:"/";"string"==typeof d&&d&&(a=d+"/"+a,b="/"===d.charAt(0))}return a=a.replace(/\/\//g,"/"),"/"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1)),a}function j(a){return function(){var c=b.Deferred();return c.then(a),c.resolve(),c.promise()}}function k(a,b){return"undefined"!=typeof b&&(a.loadedDone&&a.pop(),a.push(j(b)),a.loadedDone=!0),a}function l(a){return function(b){H=[],a(),k(H,b),0==I&&f(H)}}function m(){return b(G.prop("contentDocument"))}function n(){return b(G.prop("contentWindow"))}function o(a){return e(function(b){G.one("load",function(){b.resolve()}),G.attr("src",a)})}function p(){return e(function(a){G.one("load",function(){a.resolve()}),n().prop("location").reload()})}function q(a,b){return e(function(c){c.done(b),c.resolve(n().prop("location")[a])})}function r(a,b){I++,setTimeout(function(){var b=H.pop();a(),H.push(b),0==--I&&f(H)},b)}function s(a){return e(function(b){var c=t(arguments);setTimeout(function(){b.resolve.apply(b,c)},a)})}function t(a){return[].slice.call(a,1)}function u(){return e(function(a){var b=t(arguments);G.one("load",function(){a.resolve.apply(a,b)})})}function v(a){return function(){var c=b.Deferred();return c.resolve(m().find(a)),c.promise()}}function w(a){return this&&this.constructor==w?void H.push(v(a)):new w(a)}function x(a,c,d){return function(e){var f=b.Deferred(),g=typeof d;return"undefined"!==g&&"function"!==g?(a(e),f.resolve(e)):(f.then(d),f.resolve(c(e))),f.promise()}}function y(a,b,c){return x(function(d){d[a](b,c)},function(c){return c[a](b)},c)}function z(a,b){return y("attr",a,b)}function A(a,b){return y("prop",a,b)}function B(a,b){return x(function(c){c[a](b)},function(b){return b[a]()},b)}function C(a){return x(function(c){a.length!==d?a:[a];c.find("option").each(function(){-1!=a.indexOf(b(this).val())&&b(this).prop("selected",!0)})},function(a){var c=[];return a.find("option:selected").each(function(){c.push(b(this).val())}),c.length>1?c:c[0]},a)}function D(a){return e(function(b,c){b.then(a),b.resolve(c)})}function E(a){return"undefined"==typeof a?A("checked",!0):e(function(c,d){d.each(function(c,d){b(d).val()==a&&b(d).prop("checked",!0)}),c.resolve()})}function F(a){return function(c){if("A"===c.prop("tagName")&&"click"===a){var d=n().prop("location").pathname,e=i(h(d),c.attr("href"));return o(e)()}var f=b.Deferred();return c.trigger(a),f.resolve(),f.promise()}}document.write('<iframe id="context" width="100%" height="500px" src="about:blank"></iframe>');var G=b("#context"),H=[],I=0,J=null,K={navigateTo:function(a){H.push(o(a))},reload:function(){H.push(p())},delay:function(a,b){r(a,b)},sleep:function(a){H.push(s(a))},pause:function(){H.push(function(){return J=b.Deferred(),J.promise()})},resume:function(){J.resolve(),J=null},waitForPageLoad:function(){H.push(u())},window:{path:function(a){H.push(q("pathname",a))},href:function(a){H.push(q("href",a))},hash:function(a){H.push(q("hash",a))},search:function(a){H.push(q("search",a))}}},L={constructor:w,enter:function(a){H.push(z("value",a))},check:function(){H.push(A("checked",!0))},uncheck:function(){H.push(A("checked",!1))},select:function(a){H.push(E(a))},click:function(){H.push(F("click"))},isChecked:function(a){H.push(A("checked",a))},isSelected:function(a){H.push(A("checked",a))},isDisabled:function(a){H.push(A("disabled",a))},option:function(a){H.push(C(a))},options:function(){var a=[].slice.call(arguments);H.push(C(a.length>1?a:a[0]))},query:function(a){H.push(D(a))}};b(["attr","prop","css"]).each(function(a,b){L[b]=function(a,c){H.push(y(b,a,c))}}),b(["val","text","count#size","html","height","innerHeight","outerHeight","width","innerWidth","outerWidth","position","scrollLeft","scrollTop","offset"]).each(function(a,b){var c=b.split("#");L[c[0]]=function(a){H.push(B(c[1]||c[0],a))}}),w.prototype=L,a.browser=K,a.dsl=l,a.dropdownlist=a.input=a.element=w,"undefined"!=typeof a.chai?(a.expect=a.chai.expect,a.assert=a.chai.assert):"undefined"==typeof a.expect&&"undefined"!=typeof a.expectations&&(a.expect=a.expectations)}(this,jQuery,_);